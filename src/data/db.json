{
  "posts": [
    {
      "createdAt": 1621139532415,
      "title": "Reactã‚’ä½¿ã£ãŸãƒ†ãƒƒã‚¯ãƒ–ãƒ­ã‚°ã‚’ä½œæˆã—ã¦ã¿ãŸ",
      "body": "## ã¯ã˜ã‚ã«\n\nReactã‚’å­¦ç¿’ã—ã¦ã„ãã«ã‚ãŸã‚Šã€REST APIã‚’ç”¨ã„ãŸCRUDæ“ä½œã®å‹‰å¼·ã®ãŸã‚æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ãŸã€‚\n\nhttps://github.com/himorishige/techBlog\n\nä»Šå›ã¯ç°¡æ˜“çš„ã«åˆ©ç”¨ã§ãã‚‹JSON Serverã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ã®ã‚„ã‚Šå–ã‚Šã‚’è¡Œã„ã€Redux Toolkitã‚’è¿½åŠ çŠ¶æ…‹ã®ç®¡ç†ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚\nä»Šå¾Œã¯å¤–éƒ¨ã‚µã‚¤ãƒˆã«å…¬é–‹ã§ãã‚‹ã‚ˆã†ã«å¤–éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨é€£æºã—ã¦ã„ããŸã„ã¨ã“ã‚ã§ã™ã€‚\n\n## ä»•æ§˜ã«ã¤ã„ã¦\n\nä»Šå›ã¯ä¸‹è¨˜ã®ã‚ˆã†ãªä»•æ§˜ã‚’æƒ³å®šã—ã¦åˆ¶ä½œã‚’è¡Œã„ã¾ã—ãŸã€‚\n\n- é–²è¦§ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã®æ©Ÿèƒ½\n  - è¨˜äº‹ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ï¼ˆå…¬é–‹è¨­å®šã—ã¦ã„ã‚‹è¨˜äº‹ã®ã¿ï¼‰\n  - è¨˜äº‹è©³ç´°ã‚’è¡¨ç¤ºã™ã‚‹\n  - ã„ã„ã­ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã„ã„ã­ãŒ1å¢—ãˆã‚‹ï¼ˆä½•åº¦ã‚‚æŠ¼ã›ã‚‹ï¼‰\n- ç®¡ç†ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã®æ©Ÿèƒ½\n  - ç™»éŒ²è¨˜äº‹ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹\n  - è¨˜äº‹è©³ç´°ã‚’è¡¨ç¤ºã™ã‚‹\n  - è¨˜äº‹ã®ç·¨é›†ãŒã§ãã‚‹\n  - è¨˜äº‹ã®å…¬é–‹ãƒ»éå…¬é–‹ã®åˆ‡ã‚Šæ›¿ãˆãŒã§ãã‚‹\n  - è¨˜äº‹ã®å‰Šé™¤ãŒã§ãã‚‹\n  - æ–°è¦è¨˜äº‹ã®ä½œæˆãŒã§ãã‚‹\n  - è¨˜äº‹ã¯ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³è¨˜æ³•ã§ç™»éŒ²ã§ãã‚‹\n  - ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã¯ãªã—\n  - ç”»åƒã®æŠ•ç¨¿æ©Ÿèƒ½ã¯ãªã—\n\n## ä¸»ãªåˆ©ç”¨ã‚µãƒ¼ãƒ“ã‚¹ãƒ»åˆ©ç”¨æŠ€è¡“\n\n- React\n- Redux Toolkit\n- JSON Server â€¦ JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦åˆ©ç”¨ã§ãã‚‹ç°¡æ˜“APIã‚µãƒ¼ãƒãƒ¼\n- react-markdown â€¦ Reactã§ä½¿ãˆã‚‹ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³å¤‰æ›ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n- styled-components\n- TypeScript\n\n## JSON Server\n\nä»Šå›å¤–éƒ¨APIã¨ã—ã¦JSON Serverã‚’åˆ©ç”¨ã—ã¾ã—ãŸã€‚\nãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãã®ã¾ã¾åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€ä½™è¨ˆãªæ‰‹é–“ã‚’ã‹ã‘ãšã«ã™ãã«é–‹ç™ºã«å–ã‚Šæ›ã‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚JSONå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™APIã§ã‚ã‚Œã°ã€JSON Serverã§ä½œæˆå¾Œã«URLã ã‘å¤‰ãˆã‚Œã°å¤–éƒ¨ã¨ã®é€£æºã«ç°¡å˜ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚\n\n### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—\n\n```bash\n$ yarn add json-server\n```\n\nãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ã¾ã™ã€‚\nãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ã—ã¦ã¯ãƒªã‚½ãƒ¼ã‚¹åã‚’1éšå±¤ç›®ã«å¿…ãšç”¨æ„ã—ãªãã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚\nä»Šå›ã¯ãƒ–ãƒ­ã‚°ã‚µã‚¤ãƒˆã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã®ã§ä¸‹è¨˜ã®ã‚ˆã†ãªãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚\n\n```json:src/data/db.json\n{\n  \"posts\": [\n    {\n      \"id\": \"1\",\n      \"title\": \"create-react-appç›´å¾Œã«ã‚„ã‚‹ç’°å¢ƒæ§‹ç¯‰ã®å‚™å¿˜éŒ²\",\n      \"createdAt\": 1620804168398,\n      \"updatedAt\": 1621064460898,\n      \"body\": \"æœ¬æ–‡ãƒ†ã‚­ã‚¹ãƒˆ1\",\n      \"image\": \"/assets/images/dummy01.jpeg\",\n      \"like\": 100,\n      \"publish\": false\n    },\n    {\n      \"id\": \"2\",\n      \"title\": \"Reactã‚’ä½¿ã£ãŸãŠå¤©æ°—ã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã¦ã¿ãŸ\",\n      \"createdAt\": 1620804168398,\n      \"updatedAt\": 1621070951011,\n      \"body\": \"æœ¬æ–‡ãƒ†ã‚­ã‚¹ãƒˆ2\",\n      \"image\": \"/assets/images/dummy01.jpeg\",\n      \"like\": 112,\n      \"publish\": true\n    }\n  ]\n}\n```\n\nReactå†…ã§æ‰±ã†å‹ã¨ã—ã¦ã¯ä¸‹è¨˜ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚\næŠ•ç¨¿ã€ŒPostã€ã¨ãã®ä¸€è¦§ã€ŒPost[]ã€ã¨ã„ã†å½¢ã§ã™ã€‚\n\n```typescript:src/types/index.ts\nexport type Post = {\n  id: string;\n  createdAt: number;\n  updatedAt?: number;\n  title: string;\n  body: string;\n  image: string;\n  like: number;\n  publish: boolean;\n};\n\nexport type Posts = Post[];\n```\n\npackage.jsonã«JSON Serverèµ·å‹•ç”¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¿½è¨˜ã—ã¾ã™ã€‚\n\n```json:package.json\n  \"scripts\": {\n    \"json-server\": \"json-server --watch src/data/db.json -p 3001 -d 2000\"\n  },\n```\n\n**--watch**ã‚’ã¤ã‘ã‚‹ã“ã¨ã§å¸¸æ™‚ç›£è¦–ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nReactãŒãƒãƒ¼ãƒˆ3000ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã€**-p 3001**ã¨ã—ã¦3001ç•ªãƒãƒ¼ãƒˆã§èµ·å‹•ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã€‚\nã¾ãŸã€**-d 2000**ã¨ã—ã¦2ç§’ã®å¾…ã¡æ™‚é–“ã‚’å…¥ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚å¾…ã¡æ™‚é–“ã‚’å…¥ã‚Œã‚‹ã“ã¨ã§éåŒæœŸã®ãƒ†ã‚¹ãƒˆã‚‚ä½“æ„Ÿçš„ã«ã‚ã‹ã‚Šã‚„ã™ããªã®ã§ã¨ã¦ã‚‚ä¾¿åˆ©ã§ã™ã€‚\n\n```bash\n$ yarn json-server\n```\n\nãƒ–ãƒ©ã‚¦ã‚¶ã§ **http://localhost:3001/posts** ã‚’é–‹ãã¨ç™»éŒ²ã—ãŸè¨˜äº‹ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\n## JSON Serverã¸ã®CRUDæ“ä½œ\n\nä»Šå›ã¯è¨˜äº‹ã®ç™»éŒ²ã€ç·¨é›†ã€å‰Šé™¤ã«åˆã‚ã›ã¦Redux Toolkitã®createAsyncThunkã€axiosã‚’åˆ©ç”¨ã—ã¦JSON Serverã¸ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ãŸã€‚\n\n```typescript\nconst post:Post = è¨˜äº‹ãƒ‡ãƒ¼ã‚¿\n\n// ç™»éŒ² POST\nconst response = await axios\n  .post<Post>(`${URL}/posts`, post)\n  .catch((err) => {\n    // ã‚¨ãƒ©ãƒ¼å‡¦ç†\n  });\nreturn response.data;\n\n// ç·¨é›† PUT\nconst response = await axios\n  .put<Post>(`${URL}/posts/${post.id}`, post)\n  .catch((err) => {\n    // ã‚¨ãƒ©ãƒ¼å‡¦ç†\n  });\nreturn response.data;\n\n// å‰Šé™¤ DELETE\nconst response = await axios\n  .delete<Post>(`${URL}/posts/${post.id}`, {\n    data: { id: post.id },\n  })\n  .catch((err) => {\n    // ã‚¨ãƒ©ãƒ¼å‡¦ç†\n  });\nreturn response.data;\n```\n\nä¸Šè¨˜ã¯çœç•¥ã—ã¦ã„ã¾ã™ãŒå‰å¾Œã®å‡¦ç†ã«ã¤ã„ã¦ã¯ä¸‹è¨˜ã‚½ãƒ¼ã‚¹ã‚’å‚ç…§ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚\n\nhttps://github.com/himorishige/techBlog/blob/main/src/features/posts/postsEntitySlice.ts\n\n## Redux Toolkit\n\nJSON Serverã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«ã¯createAsyncThunkã‚’çµŒç”±ã—ã¦ã€createEntityAdapterã‚’ä½¿ã„å‡¦ç†ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚\nè©³ç´°ã¯ä¸‹è¨˜ã«ã‚‚è¨˜äº‹ã‚’æŠ•ç¨¿ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚\n\nqiitaè¨˜äº‹ãƒªãƒ³ã‚¯\n\n## è‹¦åŠ´ã—ãŸç‚¹\n\nReact Routerã§è¤‡æ•°ã®ãƒšãƒ¼ã‚¸ã‚’æ‰±ã„ãªãŒã‚‰ã€ãã®ä¸­ã§ã§ãã‚‹é™ã‚Šãƒ ãƒ€ãªé€šä¿¡ã‚„å‡¦ç†ã¯è¡Œã‚ãªã„ã‚ˆã†ã«è€ƒãˆã‚‹ã“ã¨ã«æ™‚é–“ã‚’ã‹ãªã‚Šè¦ã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ãŸã ä»Šå›ã¯åˆ¶é™ãªã©ãŒã‚ã‚‹å¤–éƒ¨ã®APIã§ã¯ãªããƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§æ§‹ç¯‰ãŒã§ããŸã®ã§åˆ¶é™ã«ã³ãã³ãã™ã‚‹å¿…è¦ãªãç²¾ç¥è¡›ç”Ÿä¸Šã‚ˆã‹ã£ãŸã‚ˆã†ã«æ€ã„ã¾ã™ã€‚\nã¾ãŸéåŒæœŸã®å‡¦ç†ã«ã¤ã„ã¦ã¯ç›¸å¤‰ã‚ã‚‰ãšæ€ªã—ã„çŸ¥è­˜ã®ã¾ã¾ãªã®ã§ã™ãŒã€ä»Šå›ã¯Redux Toolkitã®createAsyncThunkã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§æ¯”è¼ƒçš„ç°¡å˜ã«å‡¦ç†ã‚’åˆ†å²ã§ããŸã®ãŒå¤§ããªç™ºè¦‹ã§ã—ãŸã€‚\n\n## ä»Šå¾Œã®æ‹¡å¼µ\n\nä»Šå¾Œã®æ‹¡å¼µã¨ã—ã¦ã¯ä»Šã®æ‰€ä¸‹è¨˜ã‚’æƒ³å®šã—ãŸã„ã¨ã“ã‚ã§ã™ã€‚ã€‚ã€‚\n\n- ç®¡ç†ç”»é¢ã®èªè¨¼æ©Ÿèƒ½\n- ç”»åƒã®æŠ•ç¨¿æ©Ÿèƒ½\n- Expressã€mongoDBã‚’ç”¨ã„ãŸãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ§‹ç¯‰\n\n# ã•ã„ã”ã«\n\nãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«çš„ãªTODOã‚¢ãƒ—ãƒªã‹ã‚‰ã¡ã‚‡ã£ã¨é€²ã‚“ã ï¼Ÿã€APIã‚’ç”¨ã„ãŸCRUDãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã‚ˆã‚ŠçŸ¥è­˜ã‚’æ·±ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚JSON Serverã§æ°—è»½ã«ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’æ§‹ç¯‰ã§ãã¦ãŸã®ã‚‚ã‚ã‚Šã€åˆ¶ä½œæœŸé–“ã‚‚1é€±é–“ç¨‹åº¦ã¨ã‹ãªã‚ŠçŸ­æœŸé–“ã§ã™ã™ã‚ã‚‹ã“ã¨ãŒã§ããŸã®ã‚‚å¤§ããªä¸€æ­©ã§ã™ã€‚\nãƒ†ãƒƒã‚¯ãƒ–ãƒ­ã‚°ã‚‚ã™ã“ã—ãšã¤æ‹¡å¼µã—ãªãŒã‚‰ã•ã‚‰ã«çŸ¥è­˜ã‚’æ·±ã‚ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚\n\n# é–¢é€£è¨˜äº‹\n\nReduxã®è¨˜äº‹\n\n# å‚è€ƒã‚µã‚¤ãƒˆ\n\nReact\n\nhttps://github.com/reduxjs/cra-template-redux-typescript\n\nJSON Server\n\nhttps://github.com/typicode/json-server\n\nhttps://www.codegrid.net/articles/2017-json-server-1/\n\nRedux\n\nhttps://www.youtube.com/watch?v=Lmtr8hmXvj4&list=PLtbitg0evatjxN_BhyJO124bV2eDoJumf\n\nhttps://www.youtube.com/watch?v=yQz2gSQiOZA&list=PLtbitg0evatg24WZm9Q8wTIP-We2V0OpZ\n\nhttps://www.cyokodog.net/blog/redux-toolkit-async-thunk/\n\nhttps://redux-toolkit.js.org/api/createAsyncThunk\n\nhttps://redux-toolkit.js.org/api/createEntityAdapter\n\n",
      "image": "/assets/images/dummy01.jpeg",
      "like": 0,
      "publish": true,
      "id": 1
    },
    {
      "id": 2,
      "title": "Reduxã¨Redux Toolkitã«ã¤ã„ã¦[createAsyncThunkã¨createEntityAdapteræ¨ã—]",
      "createdAt": 1621142384990,
      "updatedAt": 1621142670798,
      "body": "## ã¯ã˜ã‚ã«\n\nReactåˆå­¦è€…ãŒReduxã¨Redux Toolkitã«ã¤ã„ã¦èª¿ã¹ã¦ã¿ãŸå‚™å¿˜éŒ²ã§ã™ã€‚\nå­¦ã³å§‹ã‚ãŸã¨ãã«ã¯ã™ã§ã«ToolkitãŒ1.4ã¾ã§é€²ã‚“ã§ã„ãŸã®ã§æœ€åˆã‹ã‚‰åˆ©ç”¨ã•ã›ã¦ã„ãŸã ã„ã¦ã¾ã™ãŒã€å€‹äººçš„ã«ã¯createAsyncThunkã¨createEntityAdapteræ¨ã—ã§ã™ğŸ˜…\nèª¤ã‚Šç­‰ã‚ã‚Šã¾ã—ãŸã‚‰ã‚„ã•ã—ãã”æŒ‡æ‘˜ã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ğŸ™‡ğŸ»â€â™‚ï¸\n\n## Reduxã¨ã¯\n\nReduxã¯ã€ã€ŒActionã€ã¨å‘¼ã°ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç”¨ã„ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ï¼ˆstateï¼‰ã‚’ç®¡ç†ãƒ»æ›´æ–°ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚Reactä»¥å¤–ã«ã‚‚åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ãŒReactã¨ã¨ã‚‚ã«ç”¨ã„ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã‚ˆã†ã§ã™ã€‚\nFluxã¨ã„ã†ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®æ¦‚å¿µã‚’åˆ©ç”¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€ä¸»ã«Actionã€Storeã€Reducerã®è¦ç´ ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚\n\nReactã§ã¯å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒpropã¨stateã‚’æŒã£ã¦ã„ã¾ã™ãŒã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¦æ¨¡ãŒå¤§ãããªã‚Šã«ã¤ã‚Œã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ã‚„ã‚Šå–ã‚ŠãŒå¤§å¤‰ã«ãªã£ã¦ãã¾ã™ã€‚ä¿—ã«prop drilling problemã¨ã‚‚å‘¼ã°ã‚Œã¦ã„ã¾ã™ã€‚\nReduxã‚’ç”¨ã„ã‚‹ã¨Storeã¨ã„ã†å”¯ä¸€ã®ç®±ã®ã‚ˆã†ãªã‚‚ã®ã§stateã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã€ã©ã“ã‹ã‚‰ã§ã‚‚æ›´æ–°ã€å‚ç…§ã§ãã‚‹ã¨ã„ã†å¤§ããªãƒ¡ãƒªãƒƒãƒˆã‚’æŒã£ã¦ã„ã¾ã™ã€‚\n\nReduxã®å¤§ã¾ã‹ãªæµã‚Œã¨ã—ã¦ã¯ã€\n\n- Actionã¯ActionCreatorã§ä½œã‚‰ã‚Œã¾ã™ã€‚\n- Storeã§ã¯stateã‚’ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚\n- Reducerã¯Actionã¨stateã‹ã‚‰æ–°ã—ã„stateã‚’ä½œæˆã—ã¾ã™ã€‚\n\nã¾ãšã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è¡Œã„ãŸã„Actionã‚’ã€Storeã«å¯¾ã—ã¦dispatchã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã¦é€ä¿¡ã—ã¾ã™ã€‚\næ¬¡ã«ReducerãŒã€StoreãŒå—ã‘å–ã£ãŸActionã«ã—ãŸãŒã£ã¦stateã‹ã‚‰æ–°ã—ã„stateã‚’ä½œæˆã—ã¦è¿”ã—ã¾ã™ã€‚\nå¿…ãšæ–°ã—ã„stateã®ã¿ã‚’è¿”ã™ã“ã¨ã§ã€Reduxã§ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸­ã§çŠ¶æ…‹ãŒã„ã¤ã€ã©ã®ã‚ˆã†ã«æ›´æ–°ã•ã‚ŒãŸã‹ã‚’å®¹æ˜“ã«æŠŠæ¡ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\n\n![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2021-05-15_20_39_49.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1268181/eb89b27b-0106-ca06-77f0-1945a73e449a.png)\n\nã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«ãƒ‡ãƒãƒƒã‚®ãƒ³ã‚°ã¨ã‚‚è¨€ã‚ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã€ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ãƒ„ãƒ¼ãƒ«ã‚’ç”¨ã„ã‚‹ã¨æ™‚é–“è»¸ã«æ²¿ã£ãŸå‹•ãã‚’ãƒ‡ãƒãƒƒã‚°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\nãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã¯ã¨ã¦ã‚‚æœ‰ç›Šãªåé¢ã€ãƒ«ãƒ¼ãƒ«ãŒå³æ ¼ã§æ‰‹ç¶šãä¸Šè¨˜è¼‰ã™ã‚‹å†…å®¹ã‚‚å†—é•·ã«ãªã‚‹ã“ã¨ã§å­¦ç¿’ã‚³ã‚¹ãƒˆã€é‹ç”¨ã‚³ã‚¹ãƒˆã‚‚ã‹ã‹ã‚‹ãŸã‚æœ€è¿‘ã§ã¯è„±Reduxè«–ã‚‚ã•ã‹ã‚“ã«è­°è«–ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚\n\n## Redux Toolkit\n\nãã‚“ãªä¸­å…¬å¼ã®Redux ToolkitãŒ2019/10ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚  \nRedux Toolkitã¯Reduxã‚’ã‚ˆã‚Šç°¡æ½”ã«è¨˜è¿°ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚å…¬å¼ãƒšãƒ¼ã‚¸ã«æ²è¼‰ã•ã‚Œã¦ã„ã‚‹Redux Style Guideã§ã‚‚Toolkitã®åˆ©ç”¨ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚\n\nhttps://redux.js.org/style-guide/style-guide\n\n## Redux Toolkitã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ\n\n### åˆæœŸè¨­å®šãªã©ãŒã»ã¨ã‚“ã©ä¸è¦ã«ãªã‚‹\n\nRedux DevTools Extensionï¼ˆãƒ‡ãƒãƒƒã‚®ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ï¼‰ã®è¨­å®šã‚„éåŒæœŸé€šä¿¡ã‚’æ‰±ã†ReduxThunkãªã©ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãŒåŒæ¢±ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€è¨­å®šä¸è¦ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\n### ã‚³ãƒ¼ãƒ‰é‡ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«æ•°ï¼Ÿï¼‰ãŒå°‘ãªããªã‚‹\n\nActionã€ActionCreatorã€ReducerãŒcreateSliceã¨ã„ã†ã²ã¨ã¤ã®è¨˜è¿°ã§ã¾ã¨ã‚ã¦è¨˜è¼‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nä¸€ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¼ãƒ‰è¡Œæ•°ã¯å¢—ãˆã‚‹ã‹ã‚‚ã€‚ã€‚\n\n### stateã®ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ã‚’æ„è­˜ãªãã¦ã‚ˆã„\n\nReducerã®ä¸­ã§æ–°ã—ã„stateã‚’è¿”ã™éš›ã«ã¯å¿…ãšã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªå€¤ã¨ãªã‚‹ã‚ˆã†ã«ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€Toolkitã§ã¯å†…éƒ¨ã§è‡ªå‹•çš„ã«ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªå€¤ã¨ã—ã¦å‡¦ç†ã‚’è¡Œã£ã¦ãã‚Œã¾ã™ã€‚\n\n### TypeScriptã®å‹ãŒåŠ¹ã\n\nToolkitã§ã¯å¤šãã®å‹ãŒè¨­å®šã•ã‚Œã„ã‚‹ã®ã§å‹ã«ã‚ˆã‚‹è£œå®Œã¨åˆ¶å¾¡ã®æ©æµã‚’å—ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\ncreate-react-appã®Reduxãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã†ã¨ãã®ã¾ã¾åˆ©ç”¨ã§ãã‚‹éƒ¨åˆ†ã‚‚å¤šãã¨ã¦ã‚‚ä¾¿åˆ©ã§ã™ã€‚\n\nhttps://github.com/reduxjs/cra-template-redux\n\n### createAsyncThunkã¨createEntityAdapterãŒä¾¿åˆ©\n\nToolkitã®1.3ã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸcreateAsyncThunkã¨createEntityAdapterãŒã¨ã¦ã‚‚ä¾¿åˆ©ã§ã™ã€‚\n\n### createAsyncThunk\n\nhttps://redux-toolkit.js.org/api/createAsyncThunk\n\néåŒæœŸå‡¦ç†ã«å¯¾å¿œã—ãŸActionCreatorã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°ã§ã€ä¸‹è¨˜3ç¨®ã®çŠ¶æ…‹ã‚’ç°¡å˜ã«ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\n- pending: éåŒæœŸå‡¦ç†ä¸­\n- fulfilled: éåŒæœŸå‡¦ç†ã®æˆåŠŸæ™‚\n- rejected: éåŒæœŸå‡¦ç†ã®å¤±æ•—æ™‚\n\n### createEntityAdapter\n\nhttps://redux-toolkit.js.org/api/createEntityAdapter\n\nå‹æƒ…å ±ã‚’ã‚‚ã¨ã«ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£æ“ä½œç”¨ã®Adapterã‚’ç”Ÿæˆã—ã€CRUDï¼ˆcreate, read, update, deleteï¼‰æ“ä½œã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ãã‚Œã‚‹é–¢æ•°ã§ã™ã€‚\nãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ‰±ã†ã‚ˆã†ãªå½¢ã§å‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n\n```typescript\n{\n  id: 1,\n  title: 'create-react-appç›´å¾Œã«ã‚„ã‚‹ç’°å¢ƒæ§‹ç¯‰ã®å‚™å¿˜éŒ²',\n  createdAt: 1620804168398,\n  updatedAt: 1621064460898,\n  body: 'æœ¬æ–‡ãƒ†ã‚­ã‚¹ãƒˆ',\n  image: '/assets/images/dummy01.jpeg',\n  like: 167,\n  publish: false\n} \n```\n\nä¾‹ãˆã°ä¸Šè¨˜ã®ã‚ˆã†ãªå½¢å¼ã‚’ä¸‹è¨˜ã®ã‚ˆã†ãªå½¢ã«è‡ªå‹•çš„ã«å¤‰æ›ã—ã¦ç®¡ç†ã—ã¦ãã‚Œã¾ã™ã€‚\n\n```typescript\n{\n  postsEntity: {\n    ids: [\n      1,\n      2\n    ],\n    entities: {\n      '1': {\n        id: 1,\n        title: 'create-react-appç›´å¾Œã«ã‚„ã‚‹ç’°å¢ƒæ§‹ç¯‰ã®å‚™å¿˜éŒ²',\n        createdAt: 1620804168398,\n        updatedAt: 1621064460898,\n        body: 'æœ¬æ–‡ãƒ†ã‚­ã‚¹ãƒˆ',\n        image: '/assets/images/dummy01.jpeg',\n        like: 167,\n        publish: false\n      },\n      '2': {\n        id: 2,\n        title: 'Reactã‚’ä½¿ã£ãŸãŠå¤©æ°—ã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã¦ã¿ãŸ',\n        createdAt: 1620804168398,\n        updatedAt: 1621070951011,\n        body: 'æœ¬æ–‡ãƒ†ã‚­ã‚¹ãƒˆ2',\n        image: '/assets/images/dummy01.jpeg',\n        like: 112,\n        publish: true\n      },\n    },\n  }\n}\n```\n\nãƒ‡ãƒ¼ã‚¿ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£åŒ–ï¼ˆãƒãƒ¼ãƒãƒ©ã‚¤ã‚ºï¼‰ã«ã¤ã„ã¦ã®ã¯ä¸‹è¨˜ã§ã‚µãƒ³ãƒ—ãƒ«ã‚’ãƒ™ãƒ¼ã‚¹ã«è§£èª¬ã•ã‚Œã¦ã„ã¾ã™ã€‚\n\nhttps://redux.js.org/recipes/structuring-reducers/normalizing-state-shape\n\n### å®Ÿè£…ä¾‹ \n\nå°‘ã€…é•·ã„ã®ã§ã™ãŒå®Ÿè£…ã‚’è¡Œã£ãŸã‚µãƒ³ãƒ—ãƒ«ã«ãªã‚Šã¾ã™ã€‚\nã¾ãšã¯ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹å‹æƒ…å ±ã€‚ãƒ–ãƒ­ã‚°ã®æŠ•ç¨¿ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã¦ã„ã¾ã™ã€‚\n\n```typescript:src/types/index.ts\nexport type Post = {\n  id: string;\n  createdAt: number;\n  updatedAt?: number;\n  title: string;\n  body: string;\n  image: string;\n  like: number;\n  publish: boolean;\n};\n\nexport type Posts = Post[];\n```\n\nä»¥ä¸‹æŠ•ç¨¿ä¸€è¦§ã®å–å¾—ã‚„æ›´æ–°ã€å‰Šé™¤ã‚’è¡Œã†Sliceã®ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚\n\nqiitaã®ãƒªãƒ³ã‚¯\n\nã“ã¡ã‚‰ã§ä½œæˆã—ãŸãƒ†ãƒƒã‚¯ãƒ–ãƒ­ã‚°ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ãªã£ã¦ã„ã¾ã™ã€‚\ncreateEntityAdapterã§ä½œæˆã—ãŸAdapterã«å¯¾ã—ã¦ã¯ä¸‹è¨˜ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚\n\n- addOne 1ä»¶è¿½åŠ \n- addMany è¤‡æ•°è¿½åŠ \n- setAll å…¨ä»¶è¿½åŠ ä¸Šæ›¸ã\n- removeOne 1ä»¶å‰Šé™¤\n- removeMany è¤‡æ•°å‰Šé™¤\n- removeAll å…¨ä»¶å‰Šé™¤\n- updateOne 1ä»¶ã‚’æ›´æ–°\n- updateMany è¤‡æ•°æ›´æ–°\n- upsertOne 1ä»¶ã‚’æ›´æ–°ã€å­˜åœ¨ã—ãªã„å ´åˆã¯è¿½åŠ \n- upsertMany è¤‡æ•°ã‚’æ›´æ–°ã€å­˜åœ¨ã—ãªã„å ´åˆã¯è¿½åŠ \n\nãŒåˆ©ç”¨ã§ãã¾ã™ã€‚\n\n```typescript:src/features/posts/postsEntitySlice.ts\nimport {\n  createAsyncThunk,\n  createEntityAdapter,\n  createSlice,\n  PayloadAction,\n} from '@reduxjs/toolkit';\nimport { RootState } from 'src/app/store';\nimport axios from 'axios';\n\nimport { Post, Posts } from 'src/types';\n\nexport type PostsState = {\n  posts: Posts;\n  status: 'idle' | 'loading' | 'failed';\n  message: string;\n};\n\n/**\n * entityç”¨ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’ç”Ÿæˆ\n */\n\n\nconst postsAdapter = createEntityAdapter<Post>({\n  // è¨˜äº‹ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ä¸¦ã³é †ã‚’é™é †ã«å¤‰æ›´\n  selectId: (post) => post.id,\n  sortComparer: (a, b) => {\n    if (a.id < b.id) {\n      return 1;\n    } else {\n      return -1;\n    }\n  },\n});\n\nconst postInitialEntityState = postsAdapter.getInitialState({\n  // å‹ä»¥å¤–ã«è¨­å®šã—ãŸã„ã‚‚ã®ã¯ã“ã“ã§ç”¨æ„\n  status: 'idle',\n  message: '',\n});\n\n// APIã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ\nconst URL = process.env.REACT_APP_JSON_SERVER_URL || 'http://localhost:3000';\n\n/**\n * æŠ•ç¨¿ä¸€è¦§ã‚’å–å¾—ã™ã‚‹\n */\n\nexport const fetchEntityPosts = createAsyncThunk('posts/fetchEntityPosts', async (_, thunkApi) => {\n  const response = await axios.get<Posts>(`${URL}/posts`).catch((err) => {\n    thunkApi.rejectWithValue(err); // thunkApiã‚’åˆ©ç”¨ã—ã¦ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã©ã‚’reducerã«ã‚ãŸã™ã“ã¨ãŒã§ãã‚‹\n    throw err;\n  });\n  return response.data;\n});\n\n/**\n * æŠ•ç¨¿ã‚’è¿½åŠ ã™ã‚‹\n */\n\nexport const addEntityPost = createAsyncThunk(\n  'posts/addEntityPost',\n  async (post: Omit<Post, 'id'>, thunkApi) => {\n    const response = await axios.post<Post>(`${URL}/posts`, post).catch((err) => {\n      thunkApi.rejectWithValue(err);\n      throw err;\n    });\n    return response.data;\n  },\n);\n\n/**\n * æŠ•ç¨¿ã‚’ç·¨é›†ã™ã‚‹\n */\n\nexport const updateEntityPost = createAsyncThunk(\n  'posts/updateEntityPost',\n  async (post: Post, thunkApi) => {\n    const response = await axios.put<Post>(`${URL}/posts/${post.id}`, post).catch((err) => {\n      thunkApi.rejectWithValue(err);\n      throw err;\n    });\n    return response.data;\n  },\n);\n\n/**\n * æŠ•ç¨¿ã‚’å‰Šé™¤ã™ã‚‹\n */\n\nexport const deleteEntityPost = createAsyncThunk(\n  'posts/deleteEntityPost',\n  async (postId: string, thunkApi) => {\n    const response = await axios\n      .delete<Post>(`${URL}/posts/${postId}`, {\n        data: { id: postId },\n      })\n      .catch((err) => {\n        thunkApi.rejectWithValue(err);\n        throw err;\n      });\n    return { data: response.data, postId };\n  },\n);\n\n/**\n * è©²å½“ã™ã‚‹æŠ•ç¨¿IDã«ã„ã„ã­ã‚’1ãƒ—ãƒ©ã‚¹ã™ã‚‹\n */\n\nexport const putLikes = createAsyncThunk('posts/putLikes', async (postData: Post, thunkApi) => {\n  const response = await axios\n    .put<Post>(`${URL}/posts/${postData.id}`, {\n      ...postData,\n      like: postData.like + 1,\n    })\n    .catch((err) => {\n      thunkApi.rejectWithValue(err);\n      throw err;\n    });\n\n  return { id: response.data.id, like: response.data.like };\n});\n\n/**\n * å…¬é–‹ãƒ»éå…¬é–‹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹\n */\n\nexport const togglePublish = createAsyncThunk(\n  'posts/togglePublish',\n  async (postData: Post, thunkApi) => {\n    const response = await axios\n      .put<Post>(`${URL}/posts/${postData.id}`, {\n        ...postData,\n        publish: !postData.publish,\n      })\n      .catch((err) => {\n        thunkApi.rejectWithValue(err);\n        throw err;\n      });\n    return { id: response.data.id, publish: response.data.publish };\n  },\n);\n\nexport const postsEntitySlice = createSlice({\n  name: 'postsEntity',\n  initialState: postInitialEntityState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchEntityPosts.pending, (state) => {\n        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­\n        state.status = 'loading';\n        state.message = '';\n      })\n      .addCase(fetchEntityPosts.rejected, (state, action) => {\n        // å¤±æ•—\n        state.status = 'failed';\n        if (action.error.message) {\n          state.message = action.error.message;\n        }\n      })\n      .addCase(fetchEntityPosts.fulfilled, (state, action) => {\n        // æˆåŠŸ\n        state.status = 'idle';\n        // å–å¾—ã—ãŸæŠ•ç¨¿å…¨ä»¶ã‚’storeã«ç™»éŒ²\n        postsAdapter.setAll(state, action.payload);\n      })\n      .addCase(addEntityPost.pending, (state) => {\n        state.status = 'loading';\n        state.message = '';\n      })\n      .addCase(addEntityPost.rejected, (state, action) => {\n        state.status = 'failed';\n        if (action.error.message) {\n          state.message = action.error.message;\n        }\n      })\n      .addCase(addEntityPost.fulfilled, (state, action) => {\n        state.status = 'idle';\n        // 1ä»¶ã‚’storeã«æ–°è¦ç™»éŒ²\n        postsAdapter.addOne(state, action.payload);\n      })\n      .addCase(updateEntityPost.pending, (state) => {\n        state.message = '';\n      })\n      .addCase(updateEntityPost.rejected, (state, action) => {\n        if (action.error.message) {\n          state.message = action.error.message;\n        }\n      })\n      .addCase(updateEntityPost.fulfilled, (state, action: PayloadAction<Post>) => {\n        state.status = 'idle';\n        const { id, ...updateData } = action.payload;\n        // 1ä»¶ã‚’idã§æŒ‡å®šã—ã¦æ›´æ–°\n        postsAdapter.updateOne(state, {\n          id: id,\n          changes: { ...updateData },\n        });\n      })\n      .addCase(deleteEntityPost.pending, (state) => {\n        state.status = 'loading';\n        state.message = '';\n      })\n      .addCase(deleteEntityPost.rejected, (state, action) => {\n        state.status = 'failed';\n        if (action.error.message) {\n          state.message = action.error.message;\n        }\n      })\n      .addCase(deleteEntityPost.fulfilled, (state, action) => {\n        state.status = 'idle';\n        postsAdapter.removeOne(state, action.payload.postId);\n      })\n      .addCase(putLikes.pending, (state) => {\n        state.message = '';\n      })\n      .addCase(putLikes.rejected, (state, action) => {\n        if (action.error.message) {\n          state.message = action.error.message;\n        }\n      })\n      .addCase(putLikes.fulfilled, (state, action: PayloadAction<{ id: string; like: number }>) => {\n        state.status = 'idle';\n        // 1ä»¶ã®likeã¨ã„ã†é …ç›®ã®ã¿æ›´æ–°\n        postsAdapter.updateOne(state, {\n          id: action.payload.id,\n          changes: { like: action.payload.like },\n        });\n      })\n      .addCase(togglePublish.pending, (state) => {\n        state.message = '';\n      })\n      .addCase(togglePublish.rejected, (state, action) => {\n        if (action.error.message) {\n          state.message = action.error.message;\n        }\n      })\n      .addCase(\n        togglePublish.fulfilled,\n        (state, action: PayloadAction<{ id: string; publish: boolean }>) => {\n          // 1ä»¶ã®publishã¨ã„ã†é …ç›®ã®ã¿æ›´æ–°\n          state.status = 'idle';\n          postsAdapter.updateOne(state, {\n            id: action.payload.id,\n            changes: { publish: action.payload.publish },\n          });\n        },\n      );\n  },\n});\n\nexport default postsEntitySlice.reducer;\n\n// å…¨ä»¶å–å¾—ç”¨ã®selector\nexport const selectPosts = postsAdapter.getSelectors<RootState>((state) => state.postsEntity);\n\n// å˜ä¸€é …ç›®å–å¾—ç”¨ã®selector\nexport const selectStatus = (state: RootState) => state.postsEntity.status;\nexport const selectMessage = (state: RootState) => state.postsEntity.message;\n```\n\nã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå´ã§ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«åˆ©ç”¨ã§ãã¾ã™ã€‚\nã¾ãŸuseSelectorã‚„useDispatchã«ã¤ã„ã¦ã‚‚ä¸‹è¨˜ã®ã‚ˆã†ã«å‹ã‚’æ‰±ãˆã‚‹å½¢ã§åˆ©ç”¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚\n\n```typescript:src/app/hooks.tsï¼ˆreduxãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n```\n\nã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå´ã§ã¯usuSelectorã‹ã‚‰Adapterã«å¯¾ã—ã¦ä¸‹è¨˜ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\n- selectIds idã®ä¸€è¦§ã‚’é…åˆ—ã§å–å¾—\n- selectEntities entitiesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—\n- selectAll å…¨ä»¶ã®é…åˆ—ã‚’å–å¾—\n- selectTotal ä»¶æ•°ã‚’å–å¾—\n- selectById è©²å½“ã™ã‚‹idã«ç´ã¥ããƒ‡ãƒ¼ã‚¿ã‚’å–å¾—\n\nselectAllã¨selectByIdãŒä¸€ç•ªåˆ©ç”¨ã™ã‚‹ã“ã¨ã«ãªã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚\n\n```typescript:ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå´\n// å…¨ä»¶ã‚’å–å¾—\nconst posts = useAppSelector(selectPosts.selectAll);\n\n// idã‚’æŒ‡å®šã—ã¦å–å¾—\nconst post = useAppSelector((state) => selectPosts.selectById(state, postId));\n```\n\nã“ã®ã‚ˆã†ãªå½¢ã§ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£åŒ–ã•ã‚ŒãŸã‚‚ã®ã‹ã‚‰ã€æ„è­˜ã›ãšã«é€šå¸¸ã®é…åˆ—ã®å½¢ã«å¤‰æ›ã•ã‚Œã¦å¤‰æ•°ã¸æ ¼ç´ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚\nã¾ãŸcreateAsyncThunkã§ã®å®Ÿè¡Œçµæœã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¸Šã§ã‚‚å‚ç…§ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\n```typescript:ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå´\nconst resultAction = await dispatch(fetchEntityPosts());\n// å¤±æ•—æ™‚ã§ã‚ã‚Œã°rejectedã€\n// æˆåŠŸæ™‚ã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚ã¯ãã‚Œãã‚Œfullfilledã€pendingã¨matchã•ã›ã‚‹ã“ã¨ã§åˆ¤åˆ¥ãŒå¯èƒ½\nif (fetchEntityPosts.rejected.match(resultAction)) {\n  alert('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');\n}      \n```\n\n## ã•ã„ã”ã«\nReactã‚’å‹‰å¼·ã—å§‹ã‚ãŸæ™‚ç‚¹ã§ã™ã§ã«Toolkitã‚‚1.4ã«ãªã£ã¦ã„ãŸã®ã§æœ€åˆã‹ã‚‰Toolkitã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã—ãŸãŒã€Reduxã«ã¤ã„ã¦ã¯å…¬å¼ã‚µã‚¤ãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã¿ç›´ã™ãŸã³ã«æ–°ã—ã„æ°—ä»˜ããŒã‚ã‚Šã¾ã™ã€‚ã¨ã‚Šã‚ãˆãšã€ã—ã°ã‚‰ãã¯createAsyncThunkã¨createEntityAdapteræ¨ã—ã§ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚",
      "image": "/assets/images/dummy01.jpeg",
      "like": 0,
      "publish": false
    }
  ]
}